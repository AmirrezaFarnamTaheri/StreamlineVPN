<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamlineVPN API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../api-base.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
        .bg-app {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
        }
        .animated-bg {
            position: fixed; inset: 0; background: linear-gradient(125deg, #667eea, #764ba2, #f093fb, #667eea);
            background-size: 400% 400%; animation: gradientShift 18s ease infinite; opacity: 0.05; z-index: -1;
        }
        @keyframes gradientShift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
        .glass { background: rgba(255,255,255,0.08); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.12); }
        .glass-dark { background: rgba(0,0,0,0.4); backdrop-filter: blur(16px); border: 1px solid rgba(255,255,255,0.08); }
        @keyframes fade-in-up { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slide-in { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); } 50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-fade-in-up { animation: fade-in-up 0.6s ease-out; }
        .animate-slide-in { animation: slide-in 0.4s ease-out; }
        .animate-glow { animation: glow 2s ease-in-out infinite; }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }
        .stagger-6 { animation-delay: 0.6s; }
        .code-block { background: rgba(0,0,0,0.6); border-radius: 8px; padding: 1rem; font-family: 'Fira Code', monospace; }
        .endpoint-card { transition: all 0.3s ease; cursor: pointer; }
        .endpoint-card:hover { transform: translateY(-4px); background: rgba(255,255,255,0.12); }
        .method-get { background: linear-gradient(135deg, #10b981, #059669); }
        .method-post { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .method-put { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .method-delete { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .sidebar { position: sticky; top: 2rem; height: fit-content; }
        .nav-link { transition: all 0.3s ease; }
        .nav-link:hover { background: rgba(102, 126, 234, 0.1); transform: translateX(4px); }
        .nav-link.active { background: rgba(102, 126, 234, 0.2); border-left: 3px solid #667eea; }
    </style>
</head>
<body class="bg-app text-white">
<div class="animated-bg"></div>

<!-- Header -->
<header class="glass border-b border-white/10 sticky top-0 z-50">
    <div class="container mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="flex items-center space-x-3 group">
                    <img src="../assets/logo.svg" alt="StreamlineVPN Logo" class="h-10 w-10 group-hover:scale-110 transition-transform">
                    <div>
                        <h1 class="text-xl font-bold group-hover:text-purple-400 transition-colors">StreamlineVPN API</h1>
                        <p class="text-sm text-gray-400">Developer Documentation</p>
                    </div>
                </a>
            </div>
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="px-4 py-2 text-gray-300 hover:text-white transition">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    Back to Home
                </a>
                <div class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm">
                    API v2.0
                </div>
            </div>
        </div>
    </div>
</header>

<div class="container mx-auto px-6 py-8 max-w-7xl">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sidebar Navigation -->
        <div class="lg:col-span-1">
            <div class="sidebar glass rounded-xl p-6">
                <h3 class="text-lg font-semibold mb-4 animate-fade-in-up">üìö Quick Navigation</h3>
                <nav class="space-y-2">
                    <a href="#overview" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-1">üöÄ Overview</a>
                    <a href="#authentication" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-2">üîê Authentication</a>
                    <a href="#endpoints" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-3">üîó Endpoints</a>
                    <a href="#examples" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-4">üí° Examples</a>
                    <a href="#errors" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-5">‚ö†Ô∏è Error Codes</a>
                    <a href="#rate-limits" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-6">‚è±Ô∏è Rate Limits</a>
                </nav>
                
                <div class="mt-8 p-4 bg-blue-500/10 rounded-lg border border-blue-500/20">
                    <h4 class="font-semibold text-blue-400 mb-2">üõ†Ô∏è Interactive Testing</h4>
                    <p class="text-sm text-gray-300 mb-3">Test API endpoints directly in your browser</p>
                    <button onclick="openSwaggerUI()" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm transition">
                        Open Swagger UI
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="lg:col-span-3">
            <!-- Overview Section -->
            <section id="overview" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6 flex items-center">
                        üöÄ API Overview
                        <span class="ml-3 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm">v2.0</span>
                    </h2>
                    <p class="text-lg text-gray-300 mb-6">
                        The StreamlineVPN API provides comprehensive access to VPN configuration management, 
                        source aggregation, and real-time processing capabilities.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="glass-dark rounded-lg p-6 text-center">
                            <div class="text-3xl mb-3">‚ö°</div>
                            <h3 class="font-semibold mb-2">High Performance</h3>
                            <p class="text-sm text-gray-400">Sub-100ms response times with async processing</p>
                        </div>
                        <div class="glass-dark rounded-lg p-6 text-center">
                            <div class="text-3xl mb-3">üîí</div>
                            <h3 class="font-semibold mb-2">Secure</h3>
                            <p class="text-sm text-gray-400">JWT authentication with rate limiting</p>
                        </div>
                        <div class="glass-dark rounded-lg p-6 text-center">
                            <div class="text-3xl mb-3">üìä</div>
                            <h3 class="font-semibold mb-2">Real-time</h3>
                            <p class="text-sm text-gray-400">WebSocket support for live updates</p>
                        </div>
                    </div>

                    <div class="bg-gray-800/50 rounded-lg p-6">
                        <h4 class="font-semibold mb-3">üåê Base URL</h4>
                        <div class="code-block">
                            <code class="text-green-400">https://api.streamlinevpn.com/v2</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Section -->
            <section id="authentication" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6">üîê Authentication</h2>
                    <p class="text-gray-300 mb-6">
                        StreamlineVPN API uses JWT (JSON Web Tokens) for authentication. Include your token in the Authorization header.
                    </p>
                    
                    <div class="space-y-6">
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Get Access Token</h3>
                                <span class="method-post px-3 py-1 rounded-full text-white text-sm font-medium">POST</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/auth/login</code>
                            </div>
                            <div class="code-block mb-4">
                                <pre><code class="language-json">{
  "username": "your_username",
  "password": "your_password"
}</code></pre>
                            </div>
                            <div class="text-sm text-gray-400">
                                Returns: <code class="text-green-400">{"access_token": "jwt_token", "expires_in": 3600}</code>
                            </div>
                        </div>

                        <div class="bg-gray-800/50 rounded-lg p-6">
                            <h4 class="font-semibold mb-3">üìù Using the Token</h4>
                            <div class="code-block">
                                <pre><code class="language-bash">curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     https://api.streamlinevpn.com/v2/health</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Endpoints Section -->
            <section id="endpoints" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6">üîó API Endpoints</h2>
                    
                    <div class="space-y-6">
                        <!-- Health Check -->
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Health Check</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/health</code>
                            </div>
                            <p class="text-gray-300 mb-4">Check API server health and status</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "status": "healthy",
  "version": "2.0.0",
  "uptime": 3600,
  "timestamp": "2025-01-10T12:00:00Z"
}</code></pre>
                            </div>
                        </div>

                        <!-- Statistics -->
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Get Statistics</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/api/statistics</code>
                            </div>
                            <p class="text-gray-300 mb-4">Retrieve processing statistics and metrics</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total_sources": 523,
  "active_sources": 486,
  "total_configs": 15234,
  "success_rate": 0.93,
  "last_update": "2025-01-10T11:45:00Z"
}</code></pre>
                            </div>
                        </div>

                        <!-- Start Pipeline -->
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Start Processing Pipeline</h3>
                                <span class="method-post px-3 py-1 rounded-full text-white text-sm font-medium">POST</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/api/process</code>
                            </div>
                            <p class="text-gray-300 mb-4">Start a new VPN configuration processing pipeline</p>
                            <div class="code-block mb-4">
                                <pre><code class="language-json">{
  "config_path": "config/sources.yaml",
  "output_dir": "output",
  "formats": ["json", "clash", "singbox"]
}</code></pre>
                            </div>
                            <div class="text-sm text-gray-400">
                                Returns: <code class="text-green-400">{"status": "accepted", "job_id": "job_123"}</code>
                            </div>
                        </div>

                        <!-- Get Configurations -->
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Get Configurations</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/api/configurations?limit=100&protocol=vless</code>
                            </div>
                            <p class="text-gray-300 mb-4">Retrieve processed VPN configurations with optional filters</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total": 15234,
  "configurations": [
    {
      "id": "cfg_abc123",
      "protocol": "vless",
      "server": "example.com",
      "port": 443,
      "quality_score": 0.92
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <!-- Get Sources -->
                        <div class="endpoint-card glass-dark rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Get Sources</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400">/api/sources</code>
                            </div>
                            <p class="text-gray-300 mb-4">List all configured VPN sources with status and metrics</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total": 523,
  "sources": [
    {
      "id": "src_001",
      "url": "https://example.com/configs.txt",
      "tier": "premium",
      "status": "active",
      "success_rate": 0.98
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Examples Section -->
            <section id="examples" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6">üí° Code Examples</h2>
                    
                    <div class="space-y-6">
                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üêç Python Example</h3>
                            <div class="code-block">
                                <pre><code class="language-python">import requests

API_BASE = "https://api.streamlinevpn.com/v2"
TOKEN = "your_jwt_token"

headers = {"Authorization": f"Bearer {TOKEN}"}

# Get statistics
response = requests.get(f"{API_BASE}/api/statistics", headers=headers)
stats = response.json()
print(f"Total configs: {stats['total_configs']}")

# Start pipeline
pipeline_data = {
    "config_path": "config/sources.yaml",
    "formats": ["json", "clash"]
}
response = requests.post(f"{API_BASE}/api/process", 
                        json=pipeline_data, headers=headers)
result = response.json()
print(f"Job started: {result['job_id']}")</code></pre>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üü® JavaScript Example</h3>
                            <div class="code-block">
                                <pre><code class="language-javascript">const API_BASE = 'https://api.streamlinevpn.com/v2';
const TOKEN = 'your_jwt_token';

const headers = {
    'Authorization': `Bearer ${TOKEN}`,
    'Content-Type': 'application/json'
};

// Get configurations
async function getConfigurations() {
    const response = await fetch(`${API_BASE}/api/configurations?limit=50`, {
        headers
    });
    const data = await response.json();
    console.log(`Found ${data.total} configurations`);
    return data.configurations;
}

// Start processing
async function startProcessing() {
    const response = await fetch(`${API_BASE}/api/process`, {
        method: 'POST',
        headers,
        body: JSON.stringify({
            config_path: 'config/sources.yaml',
            formats: ['json', 'clash']
        })
    });
    const result = await response.json();
    console.log(`Pipeline started: ${result.job_id}`);
}</code></pre>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üêö cURL Examples</h3>
                            <div class="code-block">
                                <pre><code class="language-bash"># Get health status
curl -H "Authorization: Bearer $TOKEN" \
     https://api.streamlinevpn.com/v2/health

# Get statistics
curl -H "Authorization: Bearer $TOKEN" \
     https://api.streamlinevpn.com/v2/api/statistics

# Start pipeline
curl -X POST \
     -H "Authorization: Bearer $TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"config_path":"config/sources.yaml","formats":["json"]}' \
     https://api.streamlinevpn.com/v2/api/process

# Get configurations
curl -H "Authorization: Bearer $TOKEN" \
     "https://api.streamlinevpn.com/v2/api/configurations?limit=100&protocol=vless"</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Codes Section -->
            <section id="errors" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6">‚ö†Ô∏è Error Codes</h2>
                    
                    <div class="space-y-4">
                        <div class="glass-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400">400 - Bad Request</h4>
                                    <p class="text-sm text-gray-400">Invalid request parameters or malformed JSON</p>
                                </div>
                                <code class="text-red-400">VALIDATION_ERROR</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400">401 - Unauthorized</h4>
                                    <p class="text-sm text-gray-400">Missing or invalid authentication token</p>
                                </div>
                                <code class="text-red-400">AUTH_REQUIRED</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400">404 - Not Found</h4>
                                    <p class="text-sm text-gray-400">Resource not found or endpoint doesn't exist</p>
                                </div>
                                <code class="text-red-400">NOT_FOUND</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400">429 - Too Many Requests</h4>
                                    <p class="text-sm text-gray-400">Rate limit exceeded</p>
                                </div>
                                <code class="text-red-400">RATE_LIMITED</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400">500 - Internal Server Error</h4>
                                    <p class="text-sm text-gray-400">Server error or processing failure</p>
                                </div>
                                <code class="text-red-400">INTERNAL_ERROR</code>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Rate Limits Section -->
            <section id="rate-limits" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6">‚è±Ô∏è Rate Limits</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üìä Standard Limits</h3>
                            <ul class="space-y-3">
                                <li class="flex justify-between">
                                    <span>GET requests</span>
                                    <code class="text-green-400">100/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>POST requests</span>
                                    <code class="text-green-400">50/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>Pipeline starts</span>
                                    <code class="text-green-400">10/hour</code>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üöÄ Premium Limits</h3>
                            <ul class="space-y-3">
                                <li class="flex justify-between">
                                    <span>GET requests</span>
                                    <code class="text-blue-400">1000/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>POST requests</span>
                                    <code class="text-blue-400">500/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>Pipeline starts</span>
                                    <code class="text-blue-400">100/hour</code>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20">
                        <h4 class="font-semibold text-yellow-400 mb-2">üí° Rate Limit Headers</h4>
                        <p class="text-sm text-gray-300 mb-3">All responses include rate limit information:</p>
                        <div class="code-block">
                            <pre><code class="language-bash">X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1641234567</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<script>
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                this.classList.add('active');
            }
        });
    });

    // Open Swagger UI
    function openSwaggerUI() {
        window.open('https://api.streamlinevpn.com/docs', '_blank');
    }

    // Intersection Observer for active nav highlighting
    const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -70% 0px',
        threshold: 0
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, observerOptions);

    // Observe all sections
    document.querySelectorAll('section[id]').forEach(section => {
        observer.observe(section);
    });

    // Add hover effects to endpoint cards
    document.querySelectorAll('.endpoint-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
</script>
</body>
</html>
