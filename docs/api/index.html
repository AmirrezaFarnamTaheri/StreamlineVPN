<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamlineVPN API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../api-base.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
        .bg-app {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
        }
        .animated-bg {
            position: fixed;
            inset: 0;
            background: linear-gradient(125deg, #667eea, #764ba2, #f093fb, #667eea);
            background-size: 400% 400%;
            animation: gradient-shift 12s ease infinite;
            opacity: 0.05;
            z-index: -1;
        }
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .glass { background: rgba(255,255,255,0.08); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.12); }
        .glass-dark { background: rgba(0,0,0,0.4); backdrop-filter: blur(16px); border: 1px solid rgba(255,255,255,0.08); }
        @keyframes fade-in-up { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slide-in { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); } 50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        @keyframes morphing { 0%, 100% { border-radius: 20px; } 25% { border-radius: 50px; } 50% { border-radius: 30px; } 75% { border-radius: 40px; } }
        @keyframes particle-float { 0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; } 50% { transform: translateY(-20px) rotate(180deg); opacity: 1; } }
        @keyframes text-shimmer { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
        @keyframes card-hover { 0% { transform: translateY(0) scale(1); } 100% { transform: translateY(-8px) scale(1.02); } }
        @keyframes pulse-ring { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(2.4); opacity: 0; } }
        @keyframes data-flow { 0% { transform: translateX(-100%); } 100% { transform: translateX(100vw); } }
        @keyframes wiggle { 0%, 7% { transform: rotateZ(0); } 15% { transform: rotateZ(-15deg); } 20% { transform: rotateZ(10deg); } 25% { transform: rotateZ(-10deg); } 30% { transform: rotateZ(6deg); } 35% { transform: rotateZ(-4deg); } 40%, 100% { transform: rotateZ(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.6s ease-out; }
        .animate-slide-in { animation: slide-in 0.4s ease-out; }
        .animate-glow { animation: glow 2s ease-in-out infinite; }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
        .animate-shimmer { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); background-size: 200% 100%; animation: shimmer 2s infinite; }
        .animate-morphing { animation: morphing 4s ease-in-out infinite; }
        .animate-particle-float { animation: particle-float 3s ease-in-out infinite; }
        .animate-text-shimmer { background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #667eea); background-size: 200% 100%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: text-shimmer 3s linear infinite; }
        .animate-card-hover { transition: all 0.3s ease; }
        .animate-card-hover:hover { animation: card-hover 0.3s ease forwards; }
        .animate-pulse-ring { position: relative; }
        .animate-pulse-ring::before { content: ''; position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 50%; transform: translate(-50%, -50%); animation: pulse-ring 2s infinite; }
        .animate-data-flow { position: relative; overflow: hidden; }
        .animate-data-flow::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, #667eea, transparent); animation: data-flow 3s linear infinite; }
        .animate-wiggle { animation: wiggle 1s ease-in-out; }
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }
        .stagger-6 { animation-delay: 0.6s; }
        .stagger-7 { animation-delay: 0.7s; }
        .stagger-8 { animation-delay: 0.8s; }
        .stagger-9 { animation-delay: 0.9s; }
        .code-block { background: rgba(0,0,0,0.6); border-radius: 8px; padding: 1rem; font-family: 'Fira Code', monospace; }
        .endpoint-card { transition: all 0.3s ease; cursor: pointer; }
        .endpoint-card:hover { transform: translateY(-4px); background: rgba(255,255,255,0.12); }
        .method-get { background: linear-gradient(135deg, #10b981, #059669); }
        .method-post { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .method-put { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .method-delete { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .sidebar { position: sticky; top: 2rem; height: fit-content; }
        .nav-link { transition: all 0.3s ease; }
        .nav-link:hover { background: rgba(102, 126, 234, 0.1); transform: translateX(4px); }
        .nav-link.active { background: rgba(102, 126, 234, 0.2); border-left: 3px solid #667eea; }
        .interactive-demo { background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); }
        .api-status { position: relative; }
        .api-status::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #10b981, #3b82f6, #f59e0b); animation: shimmer 2s infinite; }

        .no-neon {
            background: transparent !important;
            border: 0 !important;
            outline: 0 !important;
            filter: none !important;
            box-shadow: none !important;
            text-shadow: none !important;
            animation: none !important;
        }
    </style>
</head>
<body class="bg-app text-white">
<div class="animated-bg"></div>

<!-- Header -->
<header class="glass border-b border-white/10 sticky top-0 z-50 api-status">
    <div class="container mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="flex items-center space-x-3 group">
                    <img src="../assets/logo.svg" alt="StreamlineVPN Logo" class="h-10 w-10 group-hover:scale-110 transition-transform animate-wiggle">
                    <div>
                        <h1 class="text-xl font-bold group-hover:text-purple-400 transition-colors animate-text-shimmer">StreamlineVPN API</h1>
                        <p class="text-sm text-gray-400">Developer Documentation</p>
                    </div>
                </a>
            </div>
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="px-4 py-2 text-gray-300 hover:text-white transition">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    Back to Home
                </a>
                <a href="../config_generator.html" class="px-4 py-2 text-gray-300 hover:text-white transition">Generator</a>
                <a href="../interactive.html" class="px-4 py-2 text-gray-300 hover:text-white transition">Control Panel</a>
                <div class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm animate-pulse">
                    API v2.0
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span class="text-sm text-green-400">Live</span>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="container mx-auto px-6 py-8 max-w-7xl">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sidebar Navigation -->
        <div class="lg:col-span-1">
            <div class="sidebar glass rounded-xl p-6 animate-morphing">
                <h3 class="text-lg font-semibold mb-4 animate-fade-in-up animate-text-shimmer">üìö Quick Navigation</h3>
                <nav class="space-y-2">
                    <a href="#overview" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-1">üöÄ Overview</a>
                    <a href="#authentication" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-2">üîê Authentication</a>
                    <a href="#endpoints" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-3">üîó Endpoints</a>
                    <a href="#examples" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-4">üí° Examples</a>
                    <a href="#errors" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-5">‚ö†Ô∏è Error Codes</a>
                    <a href="#rate-limits" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-6">‚è±Ô∏è Rate Limits</a>
                    <a href="#pagination" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-7">üìÑ Pagination</a>
                    <a href="#websocket" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-8">üõ∞Ô∏è WebSocket Streams</a>
                    <a href="#changelog" class="nav-link block px-4 py-2 rounded-lg text-sm animate-slide-in stagger-9">üìù Changelog</a>
                </nav>
                
                <div class="mt-8 p-4 glass rounded-lg no-neon">
                    <h4 class="font-semibold text-blue-400 mb-2">üõ†Ô∏è Interactive Testing</h4>
                    <p class="text-sm text-gray-300 mb-3">Test API endpoints directly in your browser</p>
                    <button onclick="openSwaggerUI()" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm transition animate-card-hover">
                        Open Swagger UI
                    </button>
                </div>

                <div class="mt-4 p-4 glass rounded-lg no-neon">
                    <h4 class="font-semibold text-green-400 mb-2">üìä API Status</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Uptime:</span>
                            <span class="text-green-400" id="apiUptime">99.9%</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Response Time:</span>
                            <span class="text-blue-400" id="apiResponseTime">45ms</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Requests/min:</span>
                            <span class="text-purple-400" id="apiRequests">1.2K</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="lg:col-span-3">
            <!-- Overview Section -->
            <section id="overview" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 flex items-center animate-text-shimmer">
                        üöÄ API Overview
                        <span class="ml-3 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm animate-pulse">v2.0</span>
                    </h2>
                    <p class="text-lg text-gray-300 mb-6 no-neon">
                        The StreamlineVPN API provides comprehensive access to VPN configuration management,
                        source aggregation, and real-time processing capabilities with enterprise-grade performance.
                        It exposes the same battle-tested pipeline that powers the StreamlineVPN platform,
                        allowing integrators to automate configuration generation, monitor data ingestion,
                        and orchestrate deployments from their own tooling.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="glass-dark rounded-lg p-6 text-center animate-card-hover animate-data-flow">
                            <div class="text-3xl mb-3 animate-wiggle">‚ö°</div>
                            <h3 class="font-semibold mb-2 animate-text-shimmer">High Performance</h3>
                            <p class="text-sm text-gray-400">Sub-100ms response times with async processing</p>
                        </div>
                        <div class="glass-dark rounded-lg p-6 text-center animate-card-hover animate-data-flow">
                            <div class="text-3xl mb-3 animate-wiggle">üîí</div>
                            <h3 class="font-semibold mb-2 animate-text-shimmer">Secure</h3>
                            <p class="text-sm text-gray-400">JWT authentication with rate limiting</p>
                        </div>
                        <div class="glass-dark rounded-lg p-6 text-center animate-card-hover animate-data-flow">
                            <div class="text-3xl mb-3 animate-wiggle">üìä</div>
                            <h3 class="font-semibold mb-2 animate-text-shimmer">Real-time</h3>
                            <p class="text-sm text-gray-400">WebSocket support for live updates</p>
                        </div>
                    </div>

                    <div class="glass-dark rounded-lg p-6 no-neon">
                        <h4 class="font-semibold mb-3 animate-text-shimmer">üåê Base URL</h4>
                        <div class="code-block">
                            <code class="text-green-400 animate-text-shimmer">https://api.streamlinevpn.com/v2</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Section -->
            <section id="authentication" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üîê Authentication</h2>
                    <p class="text-gray-300 mb-6 no-neon">
                        StreamlineVPN API uses JWT (JSON Web Tokens) for authentication. Include your token in the
                        Authorization header. Tokens can be created from the control panel and expire after 24 hours.
                        Use the <code class="text-purple-400">/api/token/refresh</code> endpoint to renew them programmatically
                        before expiry.
                    </p>
                    
                    <div class="space-y-6">
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Get Access Token</h3>
                                <span class="method-post px-3 py-1 rounded-full text-white text-sm font-medium">POST</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/auth/login</code>
                            </div>
                            <div class="code-block mb-4">
                                <pre><code class="language-json">{
  "username": "your_username",
  "password": "your_password"
}</code></pre>
                            </div>
                            <div class="text-sm text-gray-400">
                                Returns: <code class="text-green-400">{"access_token": "jwt_token", "expires_in": 3600}</code>
                            </div>
                        </div>

                        <div class="bg-gray-800/50 rounded-lg p-6 no-neon">
                            <h4 class="font-semibold mb-3 animate-text-shimmer">üìù Using the Token</h4>
                            <div class="code-block">
                                <pre><code class="language-bash">curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     https://api.streamlinevpn.com/v2/health</code></pre>
                            </div>
                        </div>
                        <div class="bg-gray-800/50 rounded-lg p-6 no-neon">
                            <h4 class="font-semibold mb-3 animate-text-shimmer">üîÑ Refreshing Tokens</h4>
                            <div class="code-block">
<pre><code class="language-bash">curl -X POST \
  -H "Authorization: Bearer &lt;refresh_token&gt;" \
  -H "Content-Type: application/json" \
  -d '{"refresh_token":"&lt;refresh_token&gt;"}' \
  ${API_BASE}/auth/refresh</code></pre>
                            </div>
                            <p class="text-sm text-gray-400 mt-2">Returns a new access/refresh token pair.</p>
                        </div>
                        <p class="text-sm text-gray-300 mt-6 no-neon">Tokens are signed with HS256 and embed the user ID and expiry
                            time. Requests with missing or expired tokens receive a descriptive 401 response:</p>
                        <div class="code-block mt-2">
                            <pre><code class="language-json">{
  "detail": "Not authenticated"
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Endpoints Section -->
            <section id="endpoints" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üîó API Endpoints</h2>
                    
                    <div class="space-y-6">
                        <!-- Health Check -->
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Health Check</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/health</code>
                            </div>
                            <p class="text-gray-300 mb-4">Check API server health and status</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "status": "healthy",
  "version": "2.0.0",
  "uptime": 3600,
  "timestamp": "2025-01-10T12:00:00Z"
}</code></pre>
                            </div>
                        </div>

                        <!-- Statistics -->
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Get Statistics</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/api/v1/statistics</code>
                            </div>
                            <p class="text-gray-300 mb-4">Retrieve processing statistics and metrics</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total_sources": 523,
  "active_sources": 486,
  "total_configs": 15234,
  "success_rate": 0.93,
  "last_update": "2025-01-10T11:45:00Z"
}</code></pre>
                            </div>
                        </div>

                        <!-- Start Pipeline -->
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Start Processing Pipeline</h3>
                                <span class="method-post px-3 py-1 rounded-full text-white text-sm font-medium">POST</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/api/process</code>
                            </div>
                            <p class="text-gray-300 mb-4">Start a new VPN configuration processing pipeline</p>
                            <div class="code-block mb-4">
                                <pre><code class="language-json">{
  "config_path": "config/sources.yaml",
  "output_dir": "output",
  "formats": ["json", "clash", "singbox"]
}</code></pre>
                            </div>
                            <div class="text-sm text-gray-400">
                                Returns: <code class="text-green-400">{"status": "accepted", "job_id": "job_123"}</code>
                            </div>
                        </div>

                        <!-- Get Configurations -->
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Get Configurations</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/api/configurations?limit=100&protocol=vless</code>
                            </div>
                            <p class="text-gray-300 mb-4">Retrieve processed VPN configurations with optional filters</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total": 15234,
  "configurations": [
    {
      "id": "cfg_abc123",
      "protocol": "vless",
      "server": "example.com",
      "port": 443,
      "quality_score": 0.92
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <!-- Get Sources -->
                        <div class="endpoint-card glass-dark rounded-lg p-6 animate-card-hover animate-data-flow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold animate-text-shimmer">Get Sources</h3>
                                <span class="method-get px-3 py-1 rounded-full text-white text-sm font-medium">GET</span>
                            </div>
                            <div class="mb-4">
                                <code class="text-blue-400 animate-text-shimmer">/api/sources</code>
                            </div>
                            <p class="text-gray-300 mb-4">List all configured VPN sources with status and metrics</p>
                            <div class="code-block">
                                <pre><code class="language-json">{
  "total": 523,
  "sources": [
    {
      "id": "src_001",
      "url": "https://example.com/configs.txt",
      "tier": "premium",
      "status": "active",
      "success_rate": 0.98
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Interactive Demo Section -->
            <section class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing interactive-demo">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üéÆ Interactive API Demo</h2>
                    <p class="text-gray-300 mb-6">Test the API endpoints directly in your browser</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4 animate-text-shimmer">Quick Test</h3>
                            <div class="space-y-4">
                                <button onclick="testHealthEndpoint()" class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition animate-card-hover">
                                    Test Health Endpoint
                                </button>
                                <button onclick="testStatisticsEndpoint()" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition animate-card-hover">
                                    Get Statistics
                                </button>
                                <button onclick="testSourcesEndpoint()" class="w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition animate-card-hover">
                                    List Sources
                                </button>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4 animate-text-shimmer">Response</h3>
                            <div id="demoResponse" class="bg-black/50 rounded-lg p-4 min-h-[200px] text-sm font-mono overflow-auto">
                                <div class="text-gray-400">Click a button to test an endpoint...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Examples Section -->
            <section id="examples" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üí° Code Examples</h2>
                    <p class="text-gray-300 mb-6 no-neon">These snippets show how to interact with the API using
                        popular languages and tools.</p>
                    <div class="space-y-6">
                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">üêç Python Example</h3>
                            <div class="code-block">
                                <pre><code class="language-python">import requests

API_BASE = "https://api.streamlinevpn.com/v2"
TOKEN = "your_jwt_token"

headers = {"Authorization": f"Bearer {TOKEN}"}

# Get statistics
response = requests.get(f"{API_BASE}/api/v1/statistics", headers=headers)
stats = response.json()
print(f"Total configs: {stats['total_configs']}")

# Start pipeline
pipeline_data = {
    "config_path": "config/sources.yaml",
    "formats": ["json", "clash"]
}
response = requests.post(f"{API_BASE}/api/process", 
                        json=pipeline_data, headers=headers)
result = response.json()
print(f"Job started: {result['job_id']}")</code></pre>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">üü® JavaScript Example</h3>
                            <div class="code-block">
                                <pre><code class="language-javascript">const API_BASE = 'https://api.streamlinevpn.com/v2';
const TOKEN = 'your_jwt_token';

const headers = {
    'Authorization': `Bearer ${TOKEN}`,
    'Content-Type': 'application/json'
};

// Get configurations
async function getConfigurations() {
    const response = await fetch(`${API_BASE}/api/configurations?limit=50`, {
        headers
    });
    const data = await response.json();
    console.log(`Found ${data.total} configurations`);
    return data.configurations;
}

// Start processing
async function startProcessing() {
    const response = await fetch(`${API_BASE}/api/process`, {
        method: 'POST',
        headers,
        body: JSON.stringify({
            config_path: 'config/sources.yaml',
            formats: ['json', 'clash']
        })
    });
    const result = await response.json();
    console.log(`Pipeline started: ${result.job_id}`);
}</code></pre>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">üêö cURL Examples</h3>
                            <div class="code-block">
                                <pre><code class="language-bash"># Get health status
curl -H "Authorization: Bearer $TOKEN" \
     https://api.streamlinevpn.com/v2/health

# Get statistics
curl -H "Authorization: Bearer $TOKEN" \
     https://api.streamlinevpn.com/v2/api/v1/statistics

# Start pipeline
curl -X POST \
     -H "Authorization: Bearer $TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"config_path":"config/sources.yaml","formats":["json"]}' \
     https://api.streamlinevpn.com/v2/api/process

# Get configurations
curl -H "Authorization: Bearer $TOKEN" \
     "https://api.streamlinevpn.com/v2/api/configurations?limit=100&protocol=vless"</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Codes Section -->
            <section id="errors" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">‚ö†Ô∏è Error Codes</h2>
                    <p class="text-gray-300 mb-6 no-neon">All API responses include a machine-readable error code.
                        Use these codes to programmatically react to failures and surface helpful messages to users.</p>
                    <div class="space-y-4">
                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">400 - Bad Request</h4>
                                    <p class="text-sm text-gray-400">Invalid request parameters or malformed JSON</p>
                                </div>
                                <code class="text-red-400">VALIDATION_ERROR</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">401 - Unauthorized</h4>
                                    <p class="text-sm text-gray-400">Missing or invalid authentication token</p>
                                </div>
                                <code class="text-red-400">AUTH_REQUIRED</code>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">403 - Forbidden</h4>
                                    <p class="text-sm text-gray-400">Authenticated but lacking permissions</p>
                                </div>
                                <code class="text-red-400">INSUFFICIENT_PERMISSIONS</code>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">404 - Not Found</h4>
                                    <p class="text-sm text-gray-400">Resource not found or endpoint doesn't exist</p>
                                </div>
                                <code class="text-red-400">NOT_FOUND</code>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">429 - Too Many Requests</h4>
                                    <p class="text-sm text-gray-400">Rate limit exceeded</p>
                                </div>
                                <code class="text-red-400">RATE_LIMITED</code>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">500 - Internal Server Error</h4>
                                    <p class="text-sm text-gray-400">Server error or processing failure</p>
                                </div>
                                <code class="text-red-400">INTERNAL_ERROR</code>
                            </div>
                        </div>

                        <div class="glass-dark rounded-lg p-4 no-neon">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-red-400 animate-text-shimmer">503 - Service Unavailable</h4>
                                    <p class="text-sm text-gray-400">Temporary maintenance or overload</p>
                                </div>
                                <code class="text-red-400">SERVICE_UNAVAILABLE</code>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Rate Limits Section -->
            <section id="rate-limits" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up animate-morphing">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">‚è±Ô∏è Rate Limits</h2>
                    <p class="text-gray-300 mb-6 no-neon">To protect service stability we enforce per-account
                        rate limits. Applications with higher throughput requirements can request custom quotas
                        via the support channel.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">üìä Standard Limits</h3>
                            <ul class="space-y-3">
                                <li class="flex justify-between">
                                    <span>GET requests</span>
                                    <code class="text-green-400">100/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>POST requests</span>
                                    <code class="text-green-400">50/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>Pipeline starts</span>
                                    <code class="text-green-400">10/hour</code>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">üöÄ Premium Limits</h3>
                            <ul class="space-y-3">
                                <li class="flex justify-between">
                                    <span>GET requests</span>
                                    <code class="text-blue-400">1000/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>POST requests</span>
                                    <code class="text-blue-400">500/min</code>
                                </li>
                                <li class="flex justify-between">
                                    <span>Pipeline starts</span>
                                    <code class="text-blue-400">100/hour</code>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                        <div class="mt-6 p-4 glass rounded-lg no-neon">
                        <h4 class="font-semibold text-yellow-400 mb-2 animate-text-shimmer">üí° Rate Limit Headers</h4>
                        <p class="text-sm text-gray-300 mb-3">All responses include rate limit information:</p>
                        <div class="code-block">
                            <pre><code class="language-bash">X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1641234567</code></pre>
                        </div>
                        <p class="text-sm text-gray-300 mt-3 no-neon">Use these headers to implement adaptive backoff strategies before quotas reset.</p>
                    </div>
                </div>
            </section>
            <section id="pagination" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üìÑ Pagination &amp; Filtering</h2>
                    <p class="text-gray-300 mb-4 no-neon">List endpoints support standard pagination parameters to help you navigate large data sets.</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li><code>page</code> ‚Äì 1-based page index</li>
                        <li><code>size</code> ‚Äì number of items per page (max 100)</li>
                        <li><code>sort</code> ‚Äì field to sort by, prefix with <code>-</code> for descending</li>
                    </ul>
                    <p class="text-gray-300 mb-4 no-neon">Filtering is available via query parameters such as <code>protocol</code>, <code>country</code> or <code>status</code>.</p>
                    <div class="code-block"><pre><code class="language-bash">curl -H "Authorization: Bearer &lt;token&gt;" "${API_BASE}/api/v1/configurations?page=2&amp;size=50&amp;sort=-created_at&amp;protocol=vless"</code></pre></div>
                </div>
            </section>

            <section id="models" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üßæ Data Models</h2>
                    <p class="text-gray-300 mb-4 no-neon">Familiarize yourself with the structure of resources returned by the API.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">Configuration</h3>
                            <div class="code-block"><pre><code class="language-json">{
  "id": "cfg_abc123",
  "protocol": "vless",
  "server": "example.com",
  "port": 443,
  "country": "DE",
  "created_at": "2025-01-10T12:00:00Z"
}</code></pre></div>
                        </div>
                        <div class="glass-dark rounded-lg p-6 no-neon">
                            <h3 class="text-xl font-semibold mb-4 animate-text-shimmer">Source</h3>
                            <div class="code-block"><pre><code class="language-json">{
  "id": "src_001",
  "url": "https://example.com/configs.txt",
  "tier": "premium",
  "success_rate": 0.98,
  "last_checked": "2025-01-10T11:55:00Z"
}</code></pre></div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="websocket" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üõ∞Ô∏è WebSocket Streams</h2>
                    <p class="text-gray-300 mb-4 no-neon">Subscribe to real-time updates for processing jobs and metrics via WebSocket.</p>
                    <div class="code-block"><pre><code class="language-javascript">const ws = new WebSocket(`${API_BASE.replace('http', 'ws')}/ws/status`);
ws.onmessage = (e) =&gt; console.log('update:', e.data);</code></pre></div>
                </div>
            </section>
            <section id="changelog" class="mb-12">
                <div class="glass rounded-xl p-8 animate-fade-in-up">
                    <h2 class="text-3xl font-bold mb-6 animate-text-shimmer">üìù Changelog</h2>
                    <p class="text-gray-300 mb-4 no-neon">Track notable changes to the API.</p>
                    <ul class="list-disc list-inside text-gray-300 space-y-2">
                        <li><span class="text-blue-400">v2.0</span> ‚Äì Introduced job status streaming and improved rate limits</li>
                        <li><span class="text-blue-400">v1.5</span> ‚Äì Added pagination for configurations endpoint</li>
                        <li><span class="text-blue-400">v1.0</span> ‚Äì Initial release</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>
</div>

<script>
    // Load API status
    const API_BASE = window.__API_BASE__ || 'http://localhost:8080';
    
    async function loadApiStatus() {
        try {
            const response = await fetch(`${API_BASE}/health`);
            if (response.ok) {
                const data = await response.json();
                document.getElementById('apiUptime').textContent = '99.9%';
                document.getElementById('apiResponseTime').textContent = '45ms';
                document.getElementById('apiRequests').textContent = '1.2K';
            }
        } catch (error) {
            console.warn('Failed to load API status:', error);
        }
    }
    
    // Interactive demo functions
    async function testHealthEndpoint() {
        const responseDiv = document.getElementById('demoResponse');
        responseDiv.innerHTML = '<div class="text-blue-400">Testing health endpoint...</div>';
        
        try {
            const response = await fetch(`${API_BASE}/health`);
            const data = await response.json();
            responseDiv.innerHTML = `<pre class="text-green-400">${JSON.stringify(data, null, 2)}</pre>`;
        } catch (error) {
            responseDiv.innerHTML = `<div class="text-red-400">Error: ${error.message}</div>`;
        }
    }
    
    async function testStatisticsEndpoint() {
        const responseDiv = document.getElementById('demoResponse');
        responseDiv.innerHTML = '<div class="text-blue-400">Getting statistics...</div>';
        
        try {
            const response = await fetch(`${API_BASE}/api/v1/statistics`);
            const data = await response.json();
            responseDiv.innerHTML = `<pre class="text-green-400">${JSON.stringify(data, null, 2)}</pre>`;
        } catch (error) {
            responseDiv.innerHTML = `<div class="text-red-400">Error: ${error.message}</div>`;
        }
    }
    
    async function testSourcesEndpoint() {
        const responseDiv = document.getElementById('demoResponse');
        responseDiv.innerHTML = '<div class="text-blue-400">Listing sources...</div>';
        
        try {
            const response = await fetch(`${API_BASE}/api/sources`);
            const data = await response.json();
            responseDiv.innerHTML = `<pre class="text-green-400">${JSON.stringify(data, null, 2)}</pre>`;
        } catch (error) {
            responseDiv.innerHTML = `<div class="text-red-400">Error: ${error.message}</div>`;
        }
    }
    
    // Open Swagger UI
    function openSwaggerUI() {
        window.open(`${API_BASE}/docs`, '_blank');
    }
    
    // Load API status on page load
    loadApiStatus();
    setInterval(loadApiStatus, 30000); // Update every 30 seconds
    
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                this.classList.add('active');
            }
        });
    });

    // Intersection Observer for active nav highlighting
    const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -70% 0px',
        threshold: 0
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, observerOptions);

    // Observe all sections
    document.querySelectorAll('section[id]').forEach(section => {
        observer.observe(section);
    });

    // Add hover effects to endpoint cards
    document.querySelectorAll('.endpoint-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
</script>
</body>
</html>
